<!-- login.component.html -->
<nb-layout>
  <nb-layout-column class="login-container">

    <!-- Background Grid Pattern -->
    <div class="background-grid">
      <svg height="100%" width="100%" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <pattern height="80" id="grid" patternUnits="userSpaceOnUse" width="80">
            <path d="M 80 0 L 0 0 0 80" fill="none" stroke="rgba(0,140,255,0.05)" stroke-width="1"></path>
          </pattern>
        </defs>
        <rect fill="url(#grid)" height="100%" width="100%"></rect>
      </svg>
    </div>

    <!-- Animated Chart Background -->
    <div class="background-chart">
      <svg height="100%" preserveAspectRatio="none" viewBox="0 0 400 200" width="100%">
        <polyline fill="none" points="0,150 50,100 100,120 150,80 200,110 250,70 300,90 350,60 400,100" stroke="#00BFFF"
                  stroke-width="2">
          <animate attributeName="points" dur="10s" repeatCount="indefinite"
                   values="0,150 50,100 100,120 150,80 200,110 250,70 300,90 350,60 400,100; 0,100 50,150 100,80 150,120 200,70 250,110 300,60 350,90 400,150; 0,150 50,100 100,120 150,80 200,110 250,70 300,90 350,60 400,100">
          </animate>
        </polyline>
      </svg>
    </div>

    <!-- Main Content -->
    <div (keyup.enter)="handleKeyUp($event)" class="login-content">

      <!-- Logo Section -->
      <div class="logo-section">
        <div class="logo-container">
          <svg height="180" viewBox="0 0 400 400" width="180" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="mainGradient" x1="0%" x2="100%" y1="0%" y2="100%">
                <stop offset="0%" style="stop-color:#00A8FF;stop-opacity:1"/>
                <stop offset="100%" style="stop-color:#0086CC;stop-opacity:1"/>
              </linearGradient>

              <linearGradient id="accentGradient" x1="0%" x2="100%" y1="0%" y2="100%">
                <stop offset="0%" style="stop-color:#00C2FF;stop-opacity:1"/>
                <stop offset="100%" style="stop-color:#00A8FF;stop-opacity:1"/>
              </linearGradient>

              <filter height="200%" id="shadow" width="200%" x="-50%" y="-50%">
                <feGaussianBlur in="SourceAlpha" stdDeviation="8"/>
                <feOffset dx="0" dy="4" result="offsetblur"/>
                <feComponentTransfer>
                  <feFuncA slope="0.3" type="linear"/>
                </feComponentTransfer>
                <feMerge>
                  <feMergeNode/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>

            <circle cx="200" cy="200" fill="none" opacity="0.2" r="180" stroke="url(#mainGradient)" stroke-width="2"/>

            <g filter="url(#shadow)">
              <path d="M 200 80 L 280 130 L 280 230 L 200 280 L 120 230 L 120 130 Z"
                    fill="url(#mainGradient)"
                    stroke="url(#accentGradient)"
                    stroke-width="3"/>

              <path d="M 145 220 L 170 195 L 190 205 L 215 170 L 240 155 L 255 145"
                    fill="none"
                    stroke="#00C2FF"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="4"/>

              <circle cx="145" cy="220" fill="#FFFFFF" r="5"/>
              <circle cx="170" cy="195" fill="#FFFFFF" r="5"/>
              <circle cx="190" cy="205" fill="#FFFFFF" r="5"/>
              <circle cx="215" cy="170" fill="#FFFFFF" r="5"/>
              <circle cx="240" cy="155" fill="#FFFFFF" r="5"/>
              <circle cx="255" cy="145" fill="#FFFFFF" r="6"/>

              <path d="M 180 240 L 220 240 M 200 240 L 200 260"
                    stroke="#FFFFFF"
                    stroke-linecap="round"
                    stroke-width="6"/>
            </g>

            <text fill="url(#mainGradient)" font-family="Arial, sans-serif"
                  font-size="48"
                  font-weight="bold"
                  text-anchor="middle"
                  x="200"
                  y="340">
              TAS
            </text>

            <text fill="#7A7A7A" font-family="Arial, sans-serif"
                  font-size="14"
                  font-weight="300"
                  letter-spacing="2"
                  text-anchor="middle"
                  x="200"
                  y="365">
              TRADING ANALYSIS SYSTEM
            </text>
          </svg>
        </div>
        <p class="subtitle">{{ 'LOGIN_PAGE.subtitle' | translate }}</p>
      </div>

      <!-- Login Card -->
      <nb-card [nbSpinner]="showSpinner" class="login-card" nbSpinnerSize="giant" nbSpinnerStatus="primary">
        <nb-card-body>
          <form [formGroup]="loginForm">

            <!-- Email/Username Input -->
            <div class="form-group">
              <label class="label">{{ 'LOGIN_PAGE.username_label' | translate }}</label>
              <nb-form-field>
                <nb-icon icon="person-outline" nbPrefix pack="eva"></nb-icon>
                <input
                  [status]="isSubmitted && loginForm.get('username')?.invalid ? 'danger' : 'basic'"
                  formControlName="username"
                  fullWidth
                  nbInput
                  placeholder="Enter your email or username"
                  type="text">
              </nb-form-field>
            </div>

            <!-- Password Input -->
            <div class="form-group">
              <label class="label">{{ 'LOGIN_PAGE.password_label' | translate }}</label>
              <nb-form-field>
                <nb-icon icon="lock-outline" nbPrefix pack="eva"></nb-icon>
                <input
                  [status]="isSubmitted && loginForm.get('password')?.invalid ? 'danger' : 'basic'"
                  [type]="showPassword ? 'text' : 'password'"
                  formControlName="password"
                  fullWidth
                  nbInput
                  placeholder="Enter your password">
                <button
                  (click)="toggleShowPassword()"
                  ghost
                  nbButton
                  nbSuffix
                  type="button">
                  <nb-icon [icon]="showPassword ? 'eye-off-outline' : 'eye-outline'" pack="eva"></nb-icon>
                </button>
              </nb-form-field>
            </div>

            <!-- Login Button -->
            <button
              (click)="login()"
              class="login-button"
              fullWidth
              nbButton
              size="large"
              status="primary">
              {{ 'LOGIN_PAGE.login_button' | translate }}
            </button>
          </form>
        </nb-card-body>
      </nb-card>

      <!-- Footer Text -->
      <p class="footer-text">{{ 'LOGIN_PAGE.footer_text' | translate }}</p>
    </div>

  </nb-layout-column>
</nb-layout>
