<!-- login.component.html -->
<nb-layout>
  <nb-layout-column class="login-container">

    <!-- Background Grid Pattern -->
    <div class="background-grid">
      <svg height="100%" width="100%" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <pattern height="80" id="grid" patternUnits="userSpaceOnUse" width="80">
            <path d="M 80 0 L 0 0 0 80" fill="none" stroke="rgba(0,140,255,0.05)" stroke-width="1"></path>
          </pattern>
        </defs>
        <rect fill="url(#grid)" height="100%" width="100%"></rect>
      </svg>
    </div>

    <!-- Animated Chart Background -->
    <div class="background-chart">
      <svg height="100%" preserveAspectRatio="none" viewBox="0 0 400 200" width="100%">
        <polyline fill="none" points="0,150 50,100 100,120 150,80 200,110 250,70 300,90 350,60 400,100" stroke="#00BFFF" stroke-width="2">
          <animate attributeName="points" dur="10s" repeatCount="indefinite"
                   values="0,150 50,100 100,120 150,80 200,110 250,70 300,90 350,60 400,100; 0,100 50,150 100,80 150,120 200,70 250,110 300,60 350,90 400,150; 0,150 50,100 100,120 150,80 200,110 250,70 300,90 350,60 400,100">
          </animate>
        </polyline>
      </svg>
    </div>

    <!-- Main Content -->
    <div class="login-content" (keyup.enter)="handleKeyUp($event)">

      <!-- Logo Section -->
      <div class="logo-section">
        <div class="logo-container">
          <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" width="180" height="180">
            <defs>
              <linearGradient id="mainGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#00A8FF;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#0086CC;stop-opacity:1" />
              </linearGradient>

              <linearGradient id="accentGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#00C2FF;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#00A8FF;stop-opacity:1" />
              </linearGradient>

              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur in="SourceAlpha" stdDeviation="8"/>
                <feOffset dx="0" dy="4" result="offsetblur"/>
                <feComponentTransfer>
                  <feFuncA type="linear" slope="0.3"/>
                </feComponentTransfer>
                <feMerge>
                  <feMergeNode/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>

            <circle cx="200" cy="200" r="180" fill="none" stroke="url(#mainGradient)" stroke-width="2" opacity="0.2"/>

            <g filter="url(#shadow)">
              <path d="M 200 80 L 280 130 L 280 230 L 200 280 L 120 230 L 120 130 Z"
                    fill="url(#mainGradient)"
                    stroke="url(#accentGradient)"
                    stroke-width="3"/>

              <path d="M 145 220 L 170 195 L 190 205 L 215 170 L 240 155 L 255 145"
                    fill="none"
                    stroke="#00C2FF"
                    stroke-width="4"
                    stroke-linecap="round"
                    stroke-linejoin="round"/>

              <circle cx="145" cy="220" r="5" fill="#FFFFFF"/>
              <circle cx="170" cy="195" r="5" fill="#FFFFFF"/>
              <circle cx="190" cy="205" r="5" fill="#FFFFFF"/>
              <circle cx="215" cy="170" r="5" fill="#FFFFFF"/>
              <circle cx="240" cy="155" r="5" fill="#FFFFFF"/>
              <circle cx="255" cy="145" r="6" fill="#FFFFFF"/>

              <path d="M 180 240 L 220 240 M 200 240 L 200 260"
                    stroke="#FFFFFF"
                    stroke-width="6"
                    stroke-linecap="round"/>
            </g>

            <text x="200" y="340"
                  font-family="Arial, sans-serif"
                  font-size="48"
                  font-weight="bold"
                  fill="url(#mainGradient)"
                  text-anchor="middle">
              TAS
            </text>

            <text x="200" y="365"
                  font-family="Arial, sans-serif"
                  font-size="14"
                  font-weight="300"
                  fill="#7A7A7A"
                  text-anchor="middle"
                  letter-spacing="2">
              TRADING ANALYSIS SYSTEM
            </text>
          </svg>
        </div>
        <p class="subtitle">{{ 'LOGIN_PAGE.subtitle' | translate }}</p>
      </div>

      <!-- Login Card -->
      <nb-card class="login-card" [nbSpinner]="showSpinner" nbSpinnerStatus="primary" nbSpinnerSize="giant">
        <nb-card-body>
          <form [formGroup]="loginForm">

            <!-- Email/Username Input -->
            <div class="form-group">
              <label class="label">{{ 'LOGIN_PAGE.username_label' | translate }}</label>
              <nb-form-field>
                <nb-icon nbPrefix icon="person-outline" pack="eva"></nb-icon>
                <input
                  nbInput
                  fullWidth
                  type="text"
                  formControlName="username"
                  placeholder="Enter your email or username"
                  [status]="isSubmitted && loginForm.get('username')?.invalid ? 'danger' : 'basic'">
              </nb-form-field>
            </div>

            <!-- Password Input -->
            <div class="form-group">
              <label class="label">{{ 'LOGIN_PAGE.password_label' | translate }}</label>
              <nb-form-field>
                <nb-icon nbPrefix icon="lock-outline" pack="eva"></nb-icon>
                <input
                  nbInput
                  fullWidth
                  [type]="showPassword ? 'text' : 'password'"
                  formControlName="password"
                  placeholder="Enter your password"
                  [status]="isSubmitted && loginForm.get('password')?.invalid ? 'danger' : 'basic'">
                <button
                  nbSuffix
                  nbButton
                  ghost
                  type="button"
                  (click)="toggleShowPassword()">
                  <nb-icon [icon]="showPassword ? 'eye-off-outline' : 'eye-outline'" pack="eva"></nb-icon>
                </button>
              </nb-form-field>
            </div>

            <!-- Login Button -->
            <button
              nbButton
              fullWidth
              status="primary"
              size="large"
              class="login-button"
              (click)="login()">
              {{ 'LOGIN_PAGE.login_button' | translate }}
            </button>
          </form>
        </nb-card-body>
      </nb-card>

      <!-- Footer Text -->
      <p class="footer-text">{{ 'LOGIN_PAGE.footer_text' | translate }}</p>
    </div>

  </nb-layout-column>
</nb-layout>
