<nb-layout [withScroll]="false">

  <!-- ============================================ -->
  <!-- HEADER -->
  <!-- ============================================ -->
  <nb-layout-header class="tas-header" fixed>
    <app-header
      (notificationsToggle)="onNotificationsToggle()"
      (sidebarToggle)="onSidebarToggle()">
    </app-header>
  </nb-layout-header>

  <!-- ============================================ -->
  <!-- MAIN SIDEBAR -->
  <!-- ============================================ -->
  <nb-sidebar
    [state]="sidebarState"
    class="menu"
    responsive
    tag="menu">
    <app-sidebar-menu [collapsed]="sidebarState === 'collapsed'"></app-sidebar-menu>
  </nb-sidebar>

  <!-- ============================================ -->
  <!-- MAIN CONTENT AREA -->
  <!-- ============================================ -->
  <nb-layout-column class="main-content">
    <router-outlet></router-outlet>
  </nb-layout-column>

</nb-layout>

<!-- ============================================ -->
<!-- NOTIFICATION SIDEBAR -->
<!-- ============================================ -->
<nb-sidebar
  [state]="notificationSidebarState"
  class="notification-sidebar"
  right
  tag="notification-sidebar">

  <div class="notification-header">
    <h5>Notifiche</h5>
    <button (click)="closeNotifications()" ghost nbButton size="small">
      <nb-icon icon="close-outline" pack="eva"></nb-icon>
    </button>
  </div>

  <div class="notification-list">
    <div
      (click)="markAsRead(notification)"
      *ngFor="let notification of notifications"
      [class.unread]="!notification.read"
      class="notification-item">
      <div [ngClass]="'type-' + notification.type" class="notification-icon">
        <nb-icon [icon]="getNotificationIcon(notification.type)" pack="eva"></nb-icon>
      </div>
      <div class="notification-content">
        <div class="notification-title">{{ notification.title }}</div>
        <div class="notification-message">{{ notification.message }}</div>
        <div class="notification-time">{{ notification.time }}</div>
      </div>
    </div>

    <div *ngIf="notifications.length === 0" class="empty-notifications">
      <nb-icon icon="bell-off-outline" pack="eva"></nb-icon>
      <p>Nessuna notifica</p>
    </div>
  </div>

</nb-sidebar>
