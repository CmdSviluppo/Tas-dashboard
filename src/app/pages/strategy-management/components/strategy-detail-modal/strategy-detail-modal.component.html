<nb-card class="strategy-detail-modal">

  <!-- Header -->
  <nb-card-header>
    <div class="modal-header">
      <div class="header-title">
        <h5>Strategy Details</h5>
        <p *ngIf="strategy()" class="strategy-name">{{ strategy()!.name }}</p>
      </div>
      <button (click)="close()" ghost nbButton size="small" status="basic" class="close-btn">
        <nb-icon icon="close-outline"></nb-icon>
      </button>
    </div>
  </nb-card-header>

  <!-- Body -->
  <nb-card-body>

    <!-- Loading -->
    <div *ngIf="loading()" class="loading-state">
      <nb-spinner size="large"></nb-spinner>
      <p>Loading strategy details...</p>
    </div>

    <!-- Error -->
    <nb-alert *ngIf="error() && !loading()" status="danger" class="error-alert">
      {{ error() }}
    </nb-alert>

    <!-- Content -->
    <div *ngIf="strategy() && !loading()" class="modal-content">

      <!-- Basic Info -->
      <div class="info-section">
        <div class="section-header">
          <nb-icon icon="info-outline" status="primary"></nb-icon>
          <h6>Basic Information</h6>
        </div>

        <div class="info-grid">
          <div class="info-item">
            <span class="label">Name</span>
            <span class="value text-primary">{{ strategy()!.name }}</span>
          </div>

          <div class="info-item">
            <span class="label">Code</span>
            <code class="value code-badge">{{ strategy()!.code }}</code>
          </div>

          <div class="info-item">
            <span class="label">Type</span>
            <div class="value">
              <app-strategy-type-badge [type]="strategy()!.type"></app-strategy-type-badge>
            </div>
          </div>

          <div class="info-item">
            <span class="label">Status</span>
            <div class="value">
              <nb-badge
                [status]="strategy()!.isActive ? 'success' : 'basic'"
                [text]="strategy()!.isActive ? 'Active' : 'Inactive'">
              </nb-badge>
            </div>
          </div>

          <div *ngIf="strategy()!.description" class="info-item full-width">
            <span class="label">Description</span>
            <span class="value description">{{ strategy()!.description }}</span>
          </div>

          <div class="info-item full-width">
            <span class="label">Implementation Class</span>
            <code class="value implementation-class">{{ strategy()!.implementationClass }}</code>
          </div>
        </div>
      </div>

      <!-- Parameters -->
      <div class="info-section">
        <div class="section-header">
          <nb-icon icon="settings-2-outline" status="info"></nb-icon>
          <h6>Default Parameters</h6>
        </div>

        <div *ngIf="strategy()!.defaultParameters" class="json-viewer">
          <pre><code>{{ formatJson(strategy()!.defaultParameters) }}</code></pre>
        </div>

        <div *ngIf="!strategy()!.defaultParameters" class="no-data">
          <nb-icon icon="alert-circle-outline"></nb-icon>
          <span>No default parameters configured</span>
        </div>
      </div>

      <!-- Metadata -->
      <div class="info-section">
        <div class="section-header">
          <nb-icon icon="clock-outline" status="basic"></nb-icon>
          <h6>Metadata</h6>
        </div>

        <div class="info-grid metadata-grid">
          <div class="info-item">
            <span class="label">Created</span>
            <span class="value">{{ strategy()!.createdAt | date:'medium' }}</span>
          </div>

          <div class="info-item">
            <span class="label">Last Updated</span>
            <span class="value">{{ strategy()!.updatedAt | date:'medium' }}</span>
          </div>
        </div>
      </div>

    </div>
  </nb-card-body>

  <!-- Footer -->
  <nb-card-footer>
    <div class="modal-footer">
      <button (click)="close()" nbButton status="basic" class="close-footer-btn">
        <nb-icon icon="close-outline"></nb-icon>
        Close
      </button>
    </div>
  </nb-card-footer>

</nb-card>
